{% extends "base.html" %}
{% load compress humanize staticfiles hc_extras %}

{% block title %}Add Shopify - healthchecks.io{% endblock %}


{% block content %}
<div class="row">
<div class="col-sm-12">
    <h1>Shopify</h1>

    <p><a href="https://www.shopify.com/">Shopify</a> is
    an ecommerce platform that enables you to create your own online shop.
    If you have a shop on Shopify, you can integrate it with your healthchecks.io account and
    you would be notified for events that occur on your shop. This way, you keep monitoring the
    system in real time. </p>

    <h2>Setup Guide</h2>
    <div class="row ai-step">
        <div class="col-sm-6">
            <div> <span class="step-no col-sm-3">1</span></div>
            <div class="col-sm-9" style="margin-left: -15px;">
                Log into your Shopify account. To generate private API credentials in the Shopify admin:
                <ol type="1">
                    <li style="padding-left:1em">From your Shopify admin, click <strong>Apps.</strong></li>
                    <li style="padding-left:1em">Click <strong>Manage private apps.</strong></li>
                    <li style="padding-left:1em">Click <strong>Create new private app.</strong></li>
                    <li style="padding-left:1em">Enter a <strong>Title</strong> and click <strong>Save.</strong></li>
                    <li style="padding-left:1em">After you click <strong>Save</strong>, you'll see your private API credentials.</li>
                </ol>
            </div>
        </div>
        <div class="col-sm-6">
            <img
                class="ai-guide-screenshot"
                alt="Screenshot"
                src="{% static 'img/integrations/setup_shopify_1.png' %}">
        </div>
    </div>
    <div class="row ai-step">
        <div class="col-sm-6">
            <span class="step-no">2</span>
            <p>
                Click on the <strong>Private app name</strong>; HealthChecks Monitor for this example.
                Copy the <strong>API key</strong> and <strong>Password</strong> by clicking on the left 
                most icon of the respective text fields. Paste these in a form below to authorize healthchecks.io 
                communicate with your shop.
            </p>
        </div>
        <div class="col-sm-6">
            <img
                class="ai-guide-screenshot"
                alt="Screenshot"
                src="{% static 'img/integrations/setup_shopify_2.png' %}">
        </div>
    </div>
    <div class="row ai-step">
        <div class="col-sm-6">
            <div><span class="step-no col-sm-3">3</span></div>
            <div class="col-sm-9" style="margin-left: -15px;">
                On the same page, scroll down to
                <strong>ADMIN API PERMISSIONS</strong> section,
                for assurance that healthchecks will receive all the notifications
                from your shop, change all the permissions of all the functionalities 
                provided to <strong>Read and write</strong> whenever possible, if it's not
                present, then to <strong>Read access</strong>.
            </div>
        </div>
        <div class="col-sm-6">
            <img
                class="ai-guide-screenshot"
                alt="Screenshot"
                src="{% static 'img/integrations/setup_shopify_3.png' %}">
        </div>
    </div>

    <div class="row ai-step">
        <div class="col-sm-12">
            <span class="step-no">4</span>
            <p>Go on the checks page and create a new check. Give it a descriptive name, preferably indicating
            what event it will be notifying about. Copy the <strong>Ping URL</strong> created and paste it in the form below against <strong>Check's Ping URL</strong>. Copy the <strong>API Key</strong> and 
            <strong>Password</strong> generated in step 1 to their respective fields below. Take caution not to copy the <strong>Example url</strong> or the <strong>Shared secret</strong>.
            After that, select the <strong>Event</strong> you need this check to monitor and notify about from
            the dropdown. Enter your shop's website url. The format of the url is indicated in the text field. 
            Save the integration. You will now be notified about your shop's events.</p>
        </div>
    </div>

    <h2>Integration Settings</h2>

    <form method="post" class="form-horizontal" action="{% url 'hc-add-shopify' %}">
        {% csrf_token %}
        <input type="hidden" name="kind" value="shopify" />
        <div class="form-group {{ form.ping_url.css_classes }}">
            <label for="ping_url" class="col-sm-2 control-label">Check's Ping URL</label>
            <div class="col-sm-10">
                <input
                    id="ping_url"
                    type="text"
                    class="form-control"
                    name="ping_url"
                    value="{{ form.ping_url.value|default:"" }}"
                    placeholder="">
                {% if form.ping_url.errors %}
                <div class="help-block">
                    {{ form.ping_url.errors|join:"" }}
                </div>
                {% endif %}
            </div>
        </div>
        <div class="form-group {{ form.event.css_classes }}">
            <label for="event" class="col-sm-2 control-label">Event</label>
            <div class="col-sm-10">
                <select name="event" class="selectpicker show-tick col-sm-12" style="height: 36px;">
                    <option value="carts/create">Cart creation</option>
                    <option value="carts/update">Cart update</option>
                    <option value="checkouts/create">Checkout creation</option>
                    <option value="checkouts/delete">Checkout deletion</option>
                    <option value="checkouts/update">Checkout update</option>
                    <option value="collection_listings/add">Collecttion listing creation</option>
                    <option value="collection_listings/remove">Collection listing deletion</option>
                    <option value="collection_listings/update">Collection listing update</option>
                    <option value="collections/create">Collection creation</option>
                    <option value="collections/delete">Collection deletion</option>
                    <option value="collections/update">Collection update</option>
                    <option value="customer_groups/create">Customer group creation</option>
                    <option value="customer_groups/delete">Customer group deletion</option>
                    <option value="customer_groups/update">Customer group update</option>
                    <option value="customers/create">Customer creation</option>
                    <option value="customers/delete">Customer deletion</option>
                    <option value="customers/disable">Customer disable</option>
                    <option value="customers/enable">Customer enable</option>
                    <option value="customers/update">Customer update</option>
                    <option value="draft_orders/create">Draft order creation</option>
                    <option value="draft_orders/delete">Draft order deletion</option>
                    <option value="draft_orders/update">Draft order update</option>
                    <option value="fulfillments/create">Fulfillment creation</option>
                    <option value="fulfillments/update">Fulfillment update</option>
                    <option value="orders/cancelled">Order cancellation</option>
                    <option value="orders/create">Order creation</option>
                    <option value="orders/delete">Order deletion</option>
                    <option value="orders/fulfilled">Order fulfillment</option>
                    <option value="orders/paid">Order payment</option>
                    <option value="orders/updated">Order update</option>
                    <option value="product_listings/add">Product listing creation</option>
                    <option value="product_listings/remove">Product listing deletion</option>
                    <option value="product_listings/update">Product listing update</option>
                    <option value="products/create">Product creation</option>
                    <option value="products/delete">Product deletion</option>
                    <option value="products/update">Product update</option>
                    <option value="refunds/create">Refund creation</option>
                    <option value="shop/update">Shop update</option>
                    <option value="themes/create">Theme creation</option>
                    <option value="themes/delete">Theme deletion</option>
                    <option value="themes/publish">Theme publish</option>
                    <option value="themes/update">Theme update</option>
                </select>
                {% if form.event.errors %}
                <div class="help-block">
                    {{ form.event.errors|join:"" }}
                </div>
                {% endif %}
            </div>
        </div>
        <div class="form-group {{ form.shop.css_classes }}">
            <label for="shop" class="col-sm-2 control-label">Shop's website URL</label>
            <div class="col-sm-10">
                <input
                    id="shop"
                    type="text"
                    class="form-control"
                    name="shop"
                    value="{{ form.shop.value|default:"" }}"
                    placeholder="https://shopname.myshopify.com">
                {% if form.shop.errors %}
                <div class="help-block">
                    {{ form.shop.errors|join:"" }}
                </div>
                {% endif %}
            </div>
        </div>
        <div class="form-group {{ form.api_key.css_classes }}">
            <label for="api-key" class="col-sm-2 control-label">API Key</label>
            <div class="col-sm-10">
                <input
                    id="api_key"
                    type="text"
                    class="form-control"
                    name="api_key"
                    value="{{ form.api_key.value|default:"" }}"
                    placeholder="">
                {% if form.api_key.errors %}
                <div class="help-block">
                    {{ form.api_key.errors|join:"" }}
                </div>
                {% endif %}
            </div>
        </div>
        <div class="form-group {{ form.password.css_classes }}">
            <label for="password" class="col-sm-2 control-label">Password</label>
            <div class="col-sm-10">
                <input
                    id="password"
                    type="text"
                    class="form-control"
                    name="password"
                    value="{{ form.password.value|default:"" }}"
                    placeholder="">
                {% if form.password.errors %}
                <div class="help-block">
                    {{ form.password.errors|join:"" }}
                </div>
                {% endif %}
            </div>
        </div>
        <div class="form-group">
            <div class="col-sm-offset-2 col-sm-10">
                <button type="submit" class="btn btn-primary">Save Integration</button>
                {% if errors %}
                <div style="height: 55px; background: #A55102; padding: 10px; margin-top: 15px; color: white;">
                    {{ errors }}
                </div>
                {% endif %}
            </div>
        </div>
    </form>
</div>
</div>


{% endblock %}

{% block scripts %}
{% compress js %}
<script src="{% static 'js/jquery-2.1.4.min.js' %}"></script>
<script src="{% static 'js/bootstrap.min.js' %}"></script>
{% endcompress %}
{% endblock %}
